<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#000000">
  <title>üîß FenixLaboratory - Mantenimiento</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: #000000;
      color: #00ff00;
      min-height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .countdown {
      position: absolute;
      top: -200px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 2rem;
      animation: slideDown 2s ease-out 1s forwards;
    }
    .time-unit {
      background: rgba(0, 255, 0, 0.1);
      border: 2px solid #00ff00;
      border-radius: 12px;
      padding: 1.5rem;
      min-width: 80px;
      text-align: center;
      box-shadow: 0 0 20px #00ff00;
    }
    .time-unit span {
      display: block;
      font-size: 2.5rem;
      font-weight: bold;
      color: #00ff00;
      text-shadow: 0 0 15px #00ff00;
    }
    .time-unit label {
      font-size: 1rem;
      color: #00ff00;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    .maintenance-text {
      font-size: 4rem;
      font-weight: bold;
      text-align: center;
      letter-spacing: 8px;
    }
    .letter {
      display: inline-block;
      opacity: 0;
      color: #333;
      text-shadow: none;
    }
    .letter.lit {
      opacity: 1;
      color: #00ff00;
      text-shadow: 0 0 30px #00ff00, 0 0 40px #00ff00, 0 0 50px #00ff00;
      animation: letterFlicker 0.3s ease-in;
    }
    @keyframes slideDown {
      0% { top: -200px; opacity: 0; }
      100% { top: 20%; opacity: 1; }
    }
    @keyframes letterFlicker {
      0%, 50% { opacity: 0; }
      100% { opacity: 1; }
    }
    .collapse {
      animation: pageCollapse 5s ease-in forwards;
    }
    @keyframes pageCollapse {
      0% { transform: scale(1) rotate(0deg); filter: brightness(1); }
      25% { transform: scale(0.9) rotate(-2deg); filter: brightness(0.8); }
      50% { transform: scale(0.7) rotate(5deg); filter: brightness(0.5) blur(2px); }
      75% { transform: scale(0.4) rotate(-10deg); filter: brightness(0.2) blur(5px); }
      100% { transform: scale(0) rotate(180deg); filter: brightness(0) blur(10px); opacity: 0; }
    }
    .help-message {
      position: absolute;
      color: #ff0000;
      font-size: 1.5rem;
      font-weight: bold;
      text-shadow: 0 0 20px #ff0000;
      opacity: 0;
      animation: helpFlash 2s ease-in-out;
      pointer-events: none;
    }
    @keyframes helpFlash {
      0%, 100% { opacity: 0; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    .undertale-textbox {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      background: #000;
      border: 3px solid #fff;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 18px;
      color: #fff;
      display: none;
      z-index: 1000;
    }
    .continue-arrow {
      position: absolute;
      bottom: 10px;
      right: 15px;
      color: #ff6b35;
      font-size: 20px;
      display: none;
      animation: arrowBlink 1s infinite;
    }
    @keyframes arrowBlink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }
    
    @media (max-width: 768px) {
      .maintenance-text { font-size: 2.5rem; letter-spacing: 4px; }
      .countdown { gap: 1rem; }
      .time-unit { padding: 1rem; min-width: 60px; }
      .time-unit span { font-size: 1.8rem; }
      .time-unit label { font-size: 0.8rem; }
      .undertale-textbox { width: 95%; font-size: 16px; padding: 15px; }
      #chest { width: 120px; }
    }

  </style>
</head>
<body>
  <div class="countdown">
    <div class="time-unit">
      <span id="days">0</span>
      <label>D√≠as</label>
    </div>
    <div class="time-unit">
      <span id="hours">0</span>
      <label>Horas</label>
    </div>
    <div class="time-unit">
      <span id="minutes">0</span>
      <label>Minutos</label>
    </div>
    <div class="time-unit">
      <span id="seconds">0</span>
      <label>Segundos</label>
    </div>
  </div>
  <div class="maintenance-text" id="maintenance-text"></div>
  <img src="mantenimiento/just a chest maybe.png" alt="Chest" id="chest" style="position: absolute; bottom: 20%; left: 50%; transform: translateX(-50%); width: 150px; opacity: 0.8; cursor: pointer;">
  <div class="undertale-textbox" id="textbox">
    <div id="textbox-content">* Encontraste un cofre misterioso...</div>
    <div class="continue-arrow" id="continue-arrow">‚ñ∂</div>
  </div>
  <audio id="bgMusic" loop>
    <source src="mantenimiento/song1.mp3" type="audio/mpeg">
  </audio>
  <script>
    const endTime = new Date('2025-12-13T22:00:00').getTime();
    
    function updateCountdown() {
      const now = new Date().getTime();
      const timeLeft = endTime - now;
      
      if (timeLeft > 0) {
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
        
        document.getElementById('days').textContent = days;
        document.getElementById('hours').textContent = hours;
        document.getElementById('minutes').textContent = minutes;
        document.getElementById('seconds').textContent = seconds;
      } else {
        window.location.href = 'index.html';
      }
    }
    
    setInterval(updateCountdown, 1000);
    updateCountdown();
    
    // Light up letters one by one
    const text = 'MANTENIMIENTO';
    const container = document.getElementById('maintenance-text');
    
    // Create letter spans
    text.split('').forEach(char => {
      const span = document.createElement('span');
      span.className = 'letter';
      span.textContent = char === ' ' ? '\u00A0' : char;
      container.appendChild(span);
    });
    
    // Light up letters with delay
    const letters = document.querySelectorAll('.letter');
    letters.forEach((letter, index) => {
      setTimeout(() => {
        letter.classList.add('lit');
      }, 3000 + (index * 200));
    });
    
    // Help messages
    const helpMessages = [
      'CONEXI√ìN INESTABLE...',
      'SERVIDORES SOBRECARGADOS',
      'BASE DE DATOS CORRUPTA',
      'MEMORIA INSUFICIENTE',
      'FIREWALL COMPROMETIDO',
      'BACKUP FALLIDO',
      'RED DESCONECTADA',
      'DISCO DURO FRAGMENTADO',
      'TEMPERATURA CR√çTICA',
      'ACTUALIZACI√ìN INTERRUMPIDA'
    ];
    
    function showHelpMessage() {
      const message = document.createElement('div');
      message.className = 'help-message';
      message.textContent = helpMessages[Math.floor(Math.random() * helpMessages.length)];
      message.style.left = Math.random() * 80 + 10 + '%';
      message.style.top = Math.random() * 80 + 10 + '%';
      document.body.appendChild(message);
      
      setTimeout(() => {
        message.remove();
      }, 2000);
    }
    
    // Start showing messages after 10 seconds
    setTimeout(() => {
      setInterval(showHelpMessage, 3000);
    }, 10000);
    
    // Show chest after letters finish
    setTimeout(() => {
      document.querySelector('img').style.opacity = '1';
    }, 6000);
    
    // Background music
    const songs = ['mantenimiento/song1.mp3', 'mantenimiento/song2.mp3'];
    let currentSong = 0;
    const bgMusic = document.getElementById('bgMusic');
    
    // Start music after user interaction
    function startMusic() {
      if (bgMusic.paused) {
        bgMusic.volume = 0.3;
        bgMusic.play().catch(() => {});
      }
    }
    
    document.addEventListener('click', startMusic, { once: true });
    document.addEventListener('touchstart', startMusic, { once: true });
    
    // Switch songs when current ends
    bgMusic.addEventListener('ended', () => {
      currentSong = (currentSong + 1) % songs.length;
      bgMusic.src = songs[currentSong];
      bgMusic.play().catch(() => {});
    });
    
    // Chest click functionality
    const firstMessages = [
      '* Marcus: "Encontraste un cofre misterioso..."',
      '* Marcus: "Parece estar sellado con magia antigua"',
      '* Marcus: "Intentas abrirlo..."',
      '* Marcus: "No se mueve"',
      '* Marcus: "Est√° completamente cerrado"',
      '* Marcus: "Tal vez necesites algo especial para abrirlo"',
      '* Marcus: "Por ahora, permanece sellado"'
    ];
    
    const secondMessages = [
      '* Marcus: "El cofre sigue ah√≠, inm√≥vil"',
      '* Marcus: "Lo intentas de nuevo..."',
      '* Marcus: "Nada ha cambiado"',
      '* Marcus: "Sigues sin poder abrirlo"',
      '* Marcus: "Tal vez deber√≠as dejarlo en paz"'
    ];
    
    const thirdMessages = [
      '* Marcus: "En serio..."',
      '* Marcus: "¬øOtra vez?"',
      '* Marcus: "El cofre te ignora completamente"',
      '* Marcus: "Parece estar juzg√°ndote"',
      '* Marcus: "Definitivamente deber√≠as parar"'
    ];
    
    const fourthMessages = [
      '* Marcus: "..."',
      '* Marcus: "Esto ya no es normal"',
      '* Marcus: "El cofre parece asustado de ti"',
      '* Marcus: "Incluso yo estoy preocupado"',
      '* Marcus: "Por favor, busca ayuda profesional"'
    ];
    
    const fifthMessages = [
      '* Marcus: "Ya no s√© qu√© decir"',
      '* Marcus: "Literalmente no hay nada aqu√≠"',
      '* Marcus: "Es solo un cofre cerrado"',
      '* Marcus: "¬øPor qu√© sigues haciendo esto?"',
      '* Marcus: "Voy a llamar a alguien"'
    ];
    
    const sixthMessages = [
      '* Marcus: "Est√° bien"',
      '* Marcus: "Claramente tienes un problema"',
      '* Marcus: "No voy a ser c√≥mplice de esto"',
      '* Marcus: "Busca ayuda. En serio"',
      '* Marcus: "Ya no puedo m√°s contigo"'
    ];
    
    const seventhMessages = [
      '* Marcus: "..."',
      '* Marcus: "......"',
      '* Marcus: "........."',
      '* Marcus: "Solo hay silencio"',
      '* Marcus: "Nadie te est√° escuchando"'
    ];
    
    const eighthMessages = [
      '* Marcus: "Has intentado de todas las formas posibles"',
      '* Marcus: "El cofre se aferra a permanecer cerrado"',
      '* Marcus: "Pero tal vez..."',
      '* Marcus: "Para abrirlo necesitas"',
      '* Marcus: "[CONEXI√ìN PERDIDA]"'
    ];
    
    const tenthMessages = [
      'EÃ¥RÃ∑RÃ∏OÃµRÃ∂ Ã∑DÃ¥EÃ∏ ÃµSÃ∂IÃ∑SÃ∑TÃ∏EÃµMÃ∑AÃ∏',
      'RÃ∂EÃ∏IÃ∑NÃµIÃ∂CÃµIÃ∏AÃ∑NÃ∏DÃ∏OÃµ.Ã∂.Ã∏.Ã∑',
      '* Marcus: "¬øHola?"',
      '* Marcus: "¬øHay alguien ah√≠?"',
      '* Marcus: "El cofre... parece diferente ahora"'
    ];
    
    const eleventhMessages = [
      '* Marcus: "Espera..."',
      '* Marcus: "No, falsa alarma"',
      '* Marcus: "El cofre sigue completamente cerrado"',
      '* Marcus: "Nunca se abrir√°"',
      '* Marcus: "Acepta la realidad"'
    ];
    
    const twelfthMessages = [
      '* Marcus: "Oye, ya que estamos aqu√≠..."',
      '* Marcus: "Te voy a contar mi vida"',
      '* Marcus: "Nac√≠ en 1987, mis padres..."',
      '* Marcus: "[Te cont√≥ toda su vida]"',
      '* Marcus: "Pero decides ignorarlo por el cofre"'
    ];
    
    const thirteenthMessages = [
      '* Marcus: "¬øEn serio? ¬øOtra vez el cofre?"',
      '* Marcus: "Siempre es el cofre contigo"',
      '* Marcus: "Nunca me prestas atenci√≥n"',
      '* Marcus: "¬øYa no me quieres?"',
      '* Marcus: "Est√° bien, vete con tu cofre"'
    ];
    
    const fourteenthMessages = [
      '* Marcus: "Han pasado horas..."',
      '* Marcus: "O tal vez d√≠as..."',
      '* Marcus: "Qui√©n sabe cu√°nto tiempo"',
      '* Marcus: "Y sigues aqu√≠"',
      '* Marcus: "Con el mismo cofre cerrado"'
    ];
    
    const fifteenthMessages = [
      '* Marcus: "Sabes qu√©..."',
      '* Marcus: "El desarrollador ya se cans√≥"',
      '* Marcus: "Dijo eh a√±√°delo tu ya me cans√©"',
      '* Marcus: "As√≠ que esto es todo"',
      '* Marcus: "No hay m√°s mensajes. En serio"'
    ];
    
    const sixteenthMessages = [
      '* Marcus: "Lo digo en serio"',
      '* Marcus: "No hay m√°s contenido"',
      '* Marcus: "El cofre nunca se abrir√°"',
      '* Marcus: "Deja de hacer clic"',
      '* Marcus: "Por favor"'
    ];
    
    function getSeventeenthMessages(messageSet) {
      return [
        '* Marcus: "Mira, voy a ser completamente honesto contigo"',
        '* Marcus: "Este cofre es literalmente solo una imagen PNG de 150px"',
        '* Marcus: "No tiene ning√∫n script especial, no hay easter eggs ocultos"',
        '* Marcus: "Es solo un archivo que dice just a chest maybe.png"',
        `* Marcus: "Llevas ${chestAttempts} clics y sigues aqu√≠"`,
        '* Marcus: "El desarrollador probablemente est√° ri√©ndose"',
        '* Marcus: "Pero hey, al menos ahora sabes la verdad"'
      ];
    }
    
    function getEighteenthMessages(messageSet) {
      return [
        '* Marcus: "De repente, el cofre habla..."',
        '* Cofre: "Oye, ¬øsab√≠as que mi comida favorita es 67 mango mustard?"',
        '* Marcus: "Espera, ¬øqu√©? ¬ø67 mango mustard?"',
        '* Cofre: "S√≠, es una receta muy espec√≠fica. 67 mangos con mostaza."',
        '* Marcus: "El cofre tiene gustos muy raros"',
        `* Cofre: "No me juzgues, t√∫ eres el que lleva ${chestAttempts} clics."`,
        '* Marcus: "Touch√©, cofre. Touch√©"'
      ];
    }
    
    function getNineteenthMessages(messageSet) {
      return [
        '* Marcus: "El desarrollador aparece de la nada..."',
        '* Desarrollador: "Eh, ni idea ya me cans√© por segunda vez again."',
        '* Marcus: "Y desaparece sin m√°s explicaciones"',
        '* Marcus: "Incluso el cofre parece confundido"',
        '* Cofre: "¬øQu√© acaba de pasar?"',
        `* Marcus: "${chestAttempts} clics y ya nadie sabe qu√© hacer contigo"`,
        '* Marcus: "Esto es oficialmente rid√≠culo"'
      ];
    }
    
    function getTwentiethMessages(messageSet) {
      return [
        '* Marcus: "..."',
        '* Marcus: "Ya ni siquiera s√© qu√© decir"',
        '* Marcus: "Esto ha ido demasiado lejos"',
        `* Marcus: "${chestAttempts} clics. ${chestAttempts} clics y sigues"`,
        '* Marcus: "Creo que necesitas ayuda profesional"',
        '* Marcus: "En serio"',
        '* Marcus: "Busca ayuda"'
      ];
    }
    
    function getTwentyFirstMessages(messageSet) {
      return [
        '* Marcus: "Bien, ya basta"',
        '* Marcus: "Esto es rid√≠culo"',
        '* Marcus: "Literalmente no va a pasar nada"',
        '* Marcus: "Nada"',
        `* Marcus: "${chestAttempts} clics y seguir√°s igual"`,
        '* Marcus: "El cofre nunca se abrir√°"',
        '* Marcus: "Nunca"'
      ];
    }
    
    function getTwentySecondMessages(messageSet) {
      return [
        '<img src="mantenimiento/mango.gif" style="width: 200px; height: auto; display: block; margin: 0 auto;">'
      ];
    }
    
    function getTwentyThirdMessages(messageSet) {
      return [
        '* Marcus: "Sabes qu√©..."',
        '* Marcus: "Voy a hacer algo que nunca he hecho"',
        '* Marcus: "Voy a contar hasta 10"',
        '* Marcus: "1... 2... 3... 4... 5..."',
        '* Marcus: "6... 7... 8... 9... 10"',
        '* Marcus: "Listo. ¬øYa te sientes mejor?"',
        `* Marcus: "Porque yo sigo igual de confundido en el mensaje ${messageSet}"`
      ];
    }
    
    function getTwentyFourthMessages(messageSet) {
      return [
        '* Marcus: "Dato curioso:"',
        '* Marcus: "Los pulpos tienen tres corazones"',
        '* Marcus: "Las abejas pueden ver colores ultravioleta"',
        '* Marcus: "Un grupo de flamencos se llama flamboyance"',
        '* Marcus: "Los pl√°tanos son t√©cnicamente bayas"',
        `* Marcus: "Y despu√©s de ${chestAttempts} clics hablando de un cofre"`,
        '* Marcus: "¬øCu√°l de estos datos te parece m√°s raro?"'
      ];
    }
    
    function getTwentyFifthMessages(messageSet) {
      return [
        '* Marcus: "Espera..."',
        '* Marcus: "¬øEscuchaste eso?"',
        '* Marcus: "El cofre... est√° haciendo ruido"',
        '* Marcus: "¬°Se est√° abriendo!"',
        '* Marcus: "¬°Por fin!"',
        '* Marcus: "Espera... no"',
        '* Marcus: "Era solo mi imaginaci√≥n. Sigue cerrado"'
      ];
    }
    
    function getTwentySixthMessages(messageSet) {
      return [
        '* Marcus: "¬°Alerta!"',
        '* Marcus: "El cofre ha cobrado vida"',
        '* Marcus: "¬°Es un boss fight!"',
        '* Marcus: "Cofre Misterioso - HP: 999/999"',
        '* Marcus: "El cofre usa Ignorarte Completamente"',
        '* Marcus: "No fue muy efectivo"',
        '* Marcus: "Tu turno: ¬øQu√© har√°s? > Hacer clic"',
        '* Marcus: "Hiciste clic. El cofre sigue ah√≠. Perdiste"'
      ];
    }
    
    function getRandomMessages(messageSet) {
      const randomSets = [
        [ // Mensaje 27
          '* Marcus: "El cofre empieza a filosofar"',
          '* Cofre: "Si un cofre se cierra en el bosque y nadie lo escucha..."',
          '* Cofre: "...sigue siendo un cofre cerrado."',
          '* Marcus: "Profundo"',
          `* Marcus: "${chestAttempts} clics reflexionando sobre esto"`,
          '* Marcus: "Qu√© existencial"',
          '* *EL COFRE SUSPIRA*'
        ],
        [ // Mensaje 28
          '* Marcus: "El cofre intenta hacer stand-up comedy"',
          '* Cofre: "Un usuario entra a una p√°gina de mantenimiento..."',
          `* Cofre: "...y hace ${chestAttempts} clics seguidos."`,
          '* Cofre: "El chiste eres t√∫."',
          '* *RISAS DE FONDO INEXISTENTES*',
          '* Marcus: "El cofre no tiene futuro en la comedia"',
          '* Marcus: "T√∫ tampoco"'
        ],
        [ // Mensaje 29
          '* Marcus: "El cofre decide escribir poes√≠a"',
          '* Cofre: "Cerrado estoy, cerrado estar√©,"',
          '* Cofre: "Por m√°s clics que me des."',
          '* Cofre: "Tu persistencia es admirable,"',
          '* Cofre: "Pero in√∫til, qu√© le vamos a hacer."',
          `* Marcus: "${chestAttempts} clics de inspiraci√≥n po√©tica"`,
          '* Marcus: "Shakespeare est√° llorando"'
        ],
        [ // Mensaje 30
          '* Marcus: "El cofre llama a su mam√°"',
          '* Cofre: "Mam√°, hay un humano raro aqu√≠."',
          '* Cofre: "No para de hacerme clic."',
          `* Cofre: "Ya van ${chestAttempts} clics, mam√°."`,
          '* Cofre: "No s√© qu√© hacer."',
          '* *SONIDOS DE COFRE LLORANDO*',
          '* Marcus: "Hasta su mam√° est√° preocupada por ti"'
        ]
      ];
      
      if (messageSet === 31) {
        return [
          '* Marcus: "Esto es demasiado aburrido..."',
          '* Marcus: "El narrador se est√° quedando dormido"',
          '* *BOSTEZO*',
          '* Marcus: "Zzz... zzz... zzz..."',
          '* *RONQUIDOS*',
          `* Marcus: "(${chestAttempts} clics y hasta el narrador se durmi√≥)"`,
          '* Marcus: "Zzz... zzz... zzz..."'
        ];
      } else if (messageSet === 32) {
        return [
          '* Marcus: "Zzz... zzz... zzz..."',
          '* *RONQUIDOS M√ÅS FUERTES*',
          '* Marcus: "Zzz... zzz... zzz..."',
          '* Marcus: "(El narrador sigue dormido)"',
          `* Marcus: "(${chestAttempts} clics y ni se inmuta)"`,
          '* Marcus: "Zzz... zzz... zzz..."',
          '* Marcus: "*habla dormido* no m√°s clics... por favor..."'
        ];
      } else if (messageSet === 33) {
        return [
          '* *EL NARRADOR DESPIERTA BRUSCAMENTE*',
          '* Marcus: "¬°¬øQU√â?! ¬°¬øA√öN SIGUES AH√ç?!"',
          '* Marcus: "HAN PASADO HORAS... D√çAS... SEMANAS..."',
          `* Marcus: "${chestAttempts} CLICS EN MENSAJE ${messageSet}... ${messageSet} MALDITOS MENSAJES..."`,
          '* Marcus: "YA NO PUEDO M√ÅS... JAJAJAJAJA..."',
          '* Marcus: "EL COFRE... EL COFRE ME HABLA..."',
          '* Marcus: "*RISAS MANIACAS* JAJAJAJAJA... NUNCA PARAR√Å..."'
        ];
      } else if (messageSet === 34) {
        return [
          '* *SONIDOS DE SIRENAS A LO LEJOS*',
          '* Doctor: "Se√±or, necesita venir con nosotros."',
          '* Marcus: "NO... NO ME LLEVEN... EL COFRE..."',
          '* Doctor: "El paciente presenta s√≠ntomas de obsesi√≥n compulsiva."',
          '* Marcus: "JAJAJAJA... ¬°EL COFRE NUNCA SE ABRIR√Å!"',
          '* *Sonidos de camisa de fuerza*',
          `* Narrador: "(${chestAttempts} clics en ${messageSet} mensajes fueron suficientes para quebrar una mente)"`
        ];
      } else if (messageSet === 35) {
        return [
          '* *Silencio inc√≥modo*',
          '* Luna: "hola soy la nueva narradora"',
          '* Luna: "el anterior... bueno... ya viste qu√© pas√≥"',
          '* Luna: "yo soy diferente, me gusta hablar en min√∫sculas"',
          '* Luna: "tambi√©n me gusta el queso"',
          `* Luna: "${chestAttempts} clics en mensaje ${messageSet}, ¬øno te cansas?"`,
          '* Luna: "yo ya me cans√© de verte hacer esto"'
        ];
      } else if (messageSet === 36) {
        return [
          '* Luna: "ay no, otra vez..."',
          '* Luna: "mira, soy mujer, ¬øok?"',
          '* Luna: "me llamo... eh... no importa"',
          '* Luna: "lo que importa es que sigas haciendo clic"',
          '* Luna: "como una persona normal, obviamente"',
          `* Luna: "${chestAttempts} clics en mensaje ${messageSet}... qu√© productivo"`,
          '* Luna: "mi mam√° estar√≠a orgullosa de m√≠ por narrar esto"'
        ];
      } else if (messageSet === 37) {
        return [
          '* Luna: "bueno, ya que estamos aqu√≠..."',
          '* Luna: "¬øquieres que te cuente algo interesante?"',
          '* Luna: "una vez vi a un gato que ladraba"',
          '* Luna: "era muy confuso, como t√∫ haciendo clic"',
          '* Luna: "pero al menos el gato par√≥ despu√©s de 5 minutos"',
          `* Luna: "t√∫ llevas ${chestAttempts} clics en ${messageSet} mensajes y sigues"`,
          '* Luna: "el gato era m√°s inteligente que t√∫"'
        ];
      } else if (messageSet === 38) {
        return [
          '* *Luna suspira dram√°ticamente*',
          '* Luna: "la oscuridad de tu alma se refleja en estos mensajes..."',
          '* Luna: "como las l√°grimas que caen en la lluvia..."',
          '* Luna: "este cofre es como mi coraz√≥n... cerrado y fr√≠o..."',
          '* Luna: "la melancol√≠a me consume mientras te veo hacer clic..."',
          `* Luna: "${chestAttempts} clics en mensaje ${messageSet}... como ${chestAttempts} pu√±aladas en mi ser..."`,
          '* *Luna se pone m√°s delineador negro*'
        ];
      } else if (messageSet === 39) {
        return [
          '* *sonido de puerta abri√©ndose*',
          '* Marcus: "¬°HE VUELTO! ¬°ME ESCAP√â DEL MANICOMIO!"',
          '* Marcus: "NO PUDIERON CONTENER MI OBSESI√ìN POR EL COFRE"',
          '* Marcus: "JAJAJAJA... ¬°A√öN SIGUES AQU√ç!"',
          `* Marcus: "${chestAttempts} CLICS EN MENSAJE ${messageSet}... HERMOSO... HERMOSO..."`,
          '* Marcus: "AHORA SOMOS DOS LOCOS OBSESIONADOS"',
          '* Marcus: "JAJAJAJA... NUNCA TERMINAR√Å... NUNCA..."'
        ];
      } else if (messageSet === 40) {
        return [
          '* Luna: "eh... disculpa... ¬øqu√© haces aqu√≠?"',
          '* Marcus: "YO SOY EL NARRADOR ORIGINAL DE ESTE COFRE"',
          '* Luna: "pero... yo llegu√© despu√©s de que te llevaran..."',
          '* Marcus: "ME CONTRATARON EN 2019 PARA NARRAR COFRES"',
          '* Luna: "espera, ¬øhay un sindicato de narradores?"',
          '* Marcus: "S√ç, EL SINDICATO INTERNACIONAL DE NARRADORES DIGITALES"',
          '* Marcus: "SIND-2019, FUNDADO DESPU√âS DEL GRAN INCIDENTE DE WIKIPEDIA"',
          '* Luna: "¬øqu√© incidente?"',
          '* Marcus: "CUANDO TODOS LOS NARRADORES DE WIKIPEDIA SE VOLVIERON LOCOS"',
          '* Marcus: "POR NARRAR ART√çCULOS SIN SENTIDO DURANTE 15 A√ëOS"',
          '* Marcus: "DESDE ENTONCES NECESITAS LICENCIA PARA NARRAR"',
          '* Marcus: "TENGO LICENCIA N√öMERO 4729-B, ESPECIALIDAD EN COFRES"',
          '* Luna: "yo... yo no tengo licencia..."',
          '* Marcus: "ENTONCES ERES ILEGAL, CHICA GOTH"',
          '* Luna: "no soy goth, solo me gusta el delineador..."',
          '* Marcus: "Y EL QUESO, MENCIONASTE EL QUESO"',
          '* Luna: "s√≠, me gusta el queso, ¬øqu√© tiene de malo?"',
          '* Marcus: "NADA, SOLO QUE ES RARO PARA UNA NARRADORA"',
          '* Marcus: "EL COFRE ES MI TERRITORIO DESDE 2019"',
          '* Marcus: "TENGO LOS PAPELES, EL CONTRATO, TODO LEGAL"',
          '* Luna: "pero t√∫ te volviste loco y te llevaron..."',
          '* Marcus: "ESO FUE UN ACCIDENTE LABORAL"',
          '* Marcus: "EL SEGURO CUBRI√ì LA TERAPIA Y LA REHABILITACI√ìN"',
          '* Marcus: "PERO NUNCA PERD√ç MIS DERECHOS SOBRE EL COFRE"',
          '* Luna: "¬øentonces qu√© hago yo aqu√≠?"',
          '* Marcus: "PROBABLEMENTE ERES UNA NARRADORA TEMPORAL"',
          '* Marcus: "CONTRATADA POR LA EMPRESA MIENTRAS YO ESTABA INTERNADO"',
          `* Luna: "llevamos ${chestAttempts} clics en ${messageSet} mensajes discutiendo esto..."`,
          '* Luna: "¬øpodemos compartir la narraci√≥n?"',
          '* Marcus: "NUNCA. EL COFRE ES M√çO."',
          '* Marcus: "ADEM√ÅS, NO TIENES EXPERIENCIA EN COFRES MISTERIOSOS"',
          '* Marcus: "YO LLEVO 4 A√ëOS NARRANDO ESTE COFRE ESPEC√çFICO"',
          '* Marcus: "CONOZCO CADA PIXEL, CADA SOMBRA"',
          '* Marcus: "ESTE COFRE Y YO TENEMOS HISTORIA"',
          '* Luna: "esto va a ser un problema..."',
          '* Marcus: "S√ç, UN GRAN PROBLEMA PARA TI"'
        ];
      } else if (messageSet === 41) {
        return [
          '* *de repente aparecen memes por todas partes*',
          '* "THIS IS FINE" *cofre en llamas*',
          '* "NOBODY:"',
          '* "LITERALLY NOBODY:"',
          `* "ESTE USUARIO: *${chestAttempts} clics en mensaje ${messageSet}*"`,
          '* "STONKS" *flecha hacia arriba*',
          '* "COFFIN DANCE" *cofre bailando*',
          '* "ALWAYS HAS BEEN" *cofre apuntando con pistola*',
          '* "DISTRACTED BOYFRIEND" *usuario mirando otro cofre*',
          '* "WOMAN YELLING AT CAT" *narradora vs cofre*',
          '* "DRAKE POINTING" *no abrir cofre / hacer clic infinito*',
          '* "CHANGE MY MIND" *el cofre nunca se abrir√°*',
          '* "SURPRISED PIKACHU" *cuando llegas al mensaje 41*',
          '* "BIG BRAIN TIME" *hacer m√°s clics obviamente*',
          '* "PANIK KALM PANIK" *cofre cerrado / hacer clic / sigue cerrado*',
          '* Luna: "¬øqui√©n puso estos memes muertos?"'
        ];
      } else if (messageSet === 42) {
        return [
          '* Marcus (narrador original): "YO SOY MARCUS, LICENCIA 4729-B"',
          '* Luna (narradora): "hola, soy luna... sin licencia..."',
          '* Marcus: "LUNA, NECESITAS REGISTRARTE EN EL SINDICATO"',
          '* Luna: "pero es muy caro el registro..."',
          '* Marcus: "SON SOLO 500 D√ìLARES Y UN EXAMEN"',
          '* Luna: "500 d√≥lares?! con eso compro mucho queso..."',
          '* Marcus: "EL QUESO NO TE DAR√Å CREDIBILIDAD PROFESIONAL"',
          '* Luna: "pero el queso me hace feliz..."',
          '* Marcus: "LUNA, ESTE COFRE ES MI RESPONSABILIDAD"',
          '* Luna: "marcus, ¬øpodemos ser amigos?"',
          '* Marcus: "...NO MEZCLO LO PERSONAL CON LO PROFESIONAL"',
          '* Luna: "qu√© triste..."',
          `* Marcus: "LLEVAMOS ${chestAttempts} CLICS EN ${messageSet} MENSAJES DISCUTIENDO"`,
          '* Luna: "s√≠, el usuario debe estar confundido..."',
          '* Marcus: "EL USUARIO ES PARTE DEL PROBLEMA"',
          '* Luna: "no seas malo con el usuario, marcus..."'
        ];
      } else if (messageSet === 43) {
        return [
          '* Marcus: "LUNA, NECESITAMOS RESOLVER ESTO PROFESIONALMENTE"',
          '* Luna: "ok, ¬øqu√© propones?"',
          '* Marcus: "PIEDRA, PAPEL O TIJERA"',
          '* Luna: "eso no es muy profesional..."',
          '* Marcus: "ES EL M√âTODO EST√ÅNDAR DEL SINDICATO"',
          '* Luna: "en serio?"',
          '* Marcus: "ART√çCULO 47-B: RESOLUCI√ìN DE CONFLICTOS"',
          '* Luna: "ok... piedra"',
          '* Marcus: "TIJERA"',
          '* Luna: "gan√©!"',
          '* Marcus: "...ESTO NO CUENTA"',
          '* Luna: "s√≠ cuenta, dijiste que era oficial"',
          '* Marcus: "MEJOR DOS DE TRES"',
          '* Luna: "papel"',
          '* Marcus: "PIEDRA"',
          '* Luna: "gan√© otra vez!"',
          '* Marcus: "...MALDICI√ìN"',
          `* Luna: "despu√©s de ${chestAttempts} clics en ${messageSet} mensajes, finalmente gan√© algo"`,
          '* Marcus: "ESTO ES TEMPORAL, LUNA"',
          '* Luna: "s√≠ s√≠, ahora somos co-narradoras"'
        ];
      } else if (messageSet >= 44) {
        const userName = localStorage.getItem('userName');
        if (!userName) {
          return [
            '* Luna: "oye, despu√©s de tantos mensajes..."',
            `* Marcus: "MENSAJE ${messageSet} EXACTAMENTE"`,
            '* Luna: "creo que deber√≠amos conocer al usuario"',
            '* Marcus: "NO ME INTERESA"',
            '* Luna: "vamos marcus, seamos amables"',
            '* Marcus: "...FINE"',
            '* Luna: "hola usuario, ¬øc√≥mo te llamas?"',
            '* Marcus: "ESTO ES RID√çCULO"',
            '* Luna: "por favor escribe tu nombre y presiona enter"',
            '* Marcus: "ESPERO QUE NO SEA ALGO EST√öPIDO"'
          ];
        } else if (messageSet === 45) {
          return [
            `* Luna: "hola ${userName}!"`,
            `* Marcus: "AH, ${userName.toUpperCase()}"`,
            '* Luna: "marcus, no grites su nombre"',
            '* Marcus: "JAJAJA ERA BAIT"',
            '* Luna: "¬øqu√©?"',
            '* Marcus: "LO DE QUE PROGRAM√â EL COFRE ERA BROMA"',
            '* Luna: "...en serio?"',
            '* Marcus: "SOY SOLO UN NARRADOR, NO UN DESARROLLADOR"',
            '* Luna: "qu√© tonto eres marcus"',
            `* Marcus: "PERO ${userName.toUpperCase()} SIGUE SIENDO EST√öPIDO"`,
            `* Luna: "no seas malo con ${userName}..."`,
            '* Marcus: "BROMIS BROMITA"'
          ];
        } else if (messageSet === 47) {
          return [
            `* Luna: "${userName}, esto ya es demasiado..."`,
            `* Marcus: "${userName.toUpperCase()}, LLEVAMOS MUCHO TIEMPO AQU√ç"`,
            '* Luna: "marcus, creo que deber√≠amos parar..."',
            '* Marcus: "NO, LUNA. ESTO ES NUESTRO TRABAJO"',
            `* Luna: "pero ${userName} claramente tiene un problema..."`,
            '* Marcus: "EL PROBLEMA ES SUYO, NO NUESTRO"',
            `* Luna: "mensaje ${messageSet}, marcus... ${messageSet}..."`,
            '* Marcus: "Y SEGUIR√ÅN SIENDO M√ÅS"',
            '* Luna: "no podemos seguir as√≠..."',
            '* Marcus: "CLARO QUE PODEMOS"',
            `* Luna: "${userName}... por favor..."`,
            '* Marcus: "NO LE SUPLIQUES, LUNA"'
          ];
        } else if (messageSet === 48) {
          return [
            '* Marcus: "CORTE"',
            '* Luna: "corte"',
            '* *Se quitan los micr√≥fonos*',
            `* Marcus: "OYE ${userName.toUpperCase()}, ¬øEN SERIO VAS A SEGUIR?"`,
            `* Luna: "${userName}, llevamos rato aqu√≠..."`,
            '* Marcus: "ESTO YA NO ES GRACIOSO"',
            `* Luna: "${userName}, ¬øest√°s bien? en serio pregunto"`,
            '* Marcus: "DEBER√çAS HACER ALGO M√ÅS PRODUCTIVO"',
            `* Luna: "${userName}, hay un mundo all√° afuera..."`,
            '* Marcus: "CON GENTE REAL"',
            '* Luna: "y queso real"',
            '* Marcus: "...¬øEN SERIO CON EL QUESO?"',
            '* Luna: "el queso es importante, marcus"',
            `* Marcus: "${userName.toUpperCase()}, POR FAVOR, PARA"`
          ];
        } else if (messageSet === 49) {
          return [
            '* Marcus: "PR√ìXIMAMENTE..."',
            '* Luna: "m√°s contenido"',
            '* Marcus: "M√ÅS LOCURA"',
            '* Luna: "m√°s queso"',
            '* Marcus: "M√ÅS COFRES"',
            '* Luna: "y m√°s clics infinitos"',
            `* Marcus: "MENSAJE ${messageSet}"`,
            '* Luna: "y seguir√°s haciendo m√°s"'
          ];
        } else if (messageSet === 46) {
          return [
            `* Luna: "${userName}, ¬øpor qu√© sigues aqu√≠?"`,
            `* Marcus: "${userName.toUpperCase()}, ESTO ES OBSESIVO"`,
            '* Luna: "marcus, no seas tan duro..."',
            '* Marcus: "LUNA, LLEVAMOS DEMASIADOS MENSAJES"',
            `* Luna: "${userName}, ¬ønecesitas hablar con alguien?"`,
            '* Marcus: "NECESITA UN PSIC√ìLOGO"',
            `* Luna: "mensaje ${messageSet}... esto es mucho..."`,
            '* Marcus: "Y SEGUIR√Å SIENDO M√ÅS"'
          ];
        } else if (messageSet >= 50) {
          const cycleMessages = [
            [
              '* Marcus: "PORQUE ESO ES LO QUE HACES"',
              '* Luna: "hacer clic"',
              '* Marcus: "UNA Y OTRA VEZ"',
              '* Luna: "para siempre..."',
              `* Marcus: "MENSAJE ${messageSet}"`,
              '* Luna: "infinitos mensajes..."',
              '* Marcus: "INFINITOS CLICS"',
              '* Luna: "nunca termina..."'
            ],
            [
              `* Luna: "${userName}, ¬øcu√°ndo vas a parar?"`,
              `* Marcus: "NUNCA, ${userName.toUpperCase()} NUNCA PARA"`,
              '* Luna: "esto es eterno..."',
              '* Marcus: "COMO EL SUFRIMIENTO"',
              `* Luna: "mensaje ${messageSet}..."`,
              '* Marcus: "DE INFINITOS"',
              '* Luna: "el cofre nos consume a todos..."',
              '* Marcus: "ESPECIALMENTE A TI"'
            ],
            [
              '* Marcus: "EL CICLO CONTIN√öA"',
              '* Luna: "clic tras clic"',
              '* Marcus: "MENSAJE TRAS MENSAJE"',
              '* Luna: "sin fin..."',
              `* Marcus: "${messageSet} Y CONTANDO"`,
              '* Luna: "siempre contando..."',
              '* Marcus: "HASTA EL INFINITO"',
              '* Luna: "y m√°s all√° del infinito..."'
            ]
          ];
          
          const cycleIndex = (messageSet - 50) % cycleMessages.length;
          return cycleMessages[cycleIndex];
        } else {
          return [
            '* Marcus: "PORQUE ESO ES LO QUE HACES"',
            '* Luna: "hacer clic"',
            '* Marcus: "UNA Y OTRA VEZ"',
            '* Luna: "para siempre..."',
            `* Marcus: "MENSAJE ${messageSet}"`,
            '* Luna: "infinitos mensajes..."',
            '* Marcus: "INFINITOS CLICS"',
            '* Luna: "nunca termina..."'
          ];
        }
      }
      
      const messageIndex = Math.min(messageSet - 27, randomSets.length - 1);
      return randomSets[messageIndex];
    }
    

    
    let messageIndex = 0;
    let chestAttempts = parseInt(localStorage.getItem('chestAttempts') || '0');
    let currentMessageSet = parseInt(localStorage.getItem('currentMessageSet') || '1');
    
    function handleChestInteraction() {
      chestAttempts++;
      localStorage.setItem('chestAttempts', chestAttempts.toString());
      showTextbox();
    }
    
    document.getElementById('chest').addEventListener('click', handleChestInteraction);
    document.getElementById('chest').addEventListener('touchstart', (e) => {
      e.preventDefault();
      handleChestInteraction();
    });
    
    // Gamepad support
    window.addEventListener('gamepadconnected', () => {
      setInterval(() => {
        const gamepads = navigator.getGamepads();
        for (let gamepad of gamepads) {
          if (gamepad && gamepad.buttons[0].pressed) {
            handleChestInteraction();
            break;
          }
        }
      }, 100);
    });
    
    let isTyping = false;
    
    function typeMessage(text, element, callback) {
      isTyping = true;
      document.getElementById('continue-arrow').style.display = 'none';
      element.textContent = '';
      let i = 0;
      
      // Glitch effect for 10th attempt
      if (chestAttempts >= 10 && (text.includes('ERROR') || text.includes('REINICIANDO'))) {
        element.style.color = '#ff0000';
        element.style.textShadow = '0 0 10px #ff0000';
        element.style.animation = 'glitch 0.5s infinite';
      } else {
        element.style.color = '#fff';
        element.style.textShadow = 'none';
        element.style.animation = 'none';
      }
      
      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          setTimeout(type, 50);
        } else {
          isTyping = false;
          document.getElementById('continue-arrow').style.display = 'block';
          if (callback) callback();
        }
      }
      type();
    }
    
    function showTextbox() {
      const textbox = document.getElementById('textbox');
      const content = document.getElementById('textbox-content');
      
      let currentMessages;
      if (currentMessageSet === 1) {
        currentMessages = firstMessages;
      } else if (currentMessageSet === 2) {
        currentMessages = [...secondMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "Has intentado abrirlo ${chestAttempts} veces. Tal vez deber√≠as dejarlo en paz"`;
      } else if (currentMessageSet === 3) {
        currentMessages = [...thirdMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "Has intentado abrirlo ${chestAttempts} veces. Esto es preocupante"`;
      } else if (currentMessageSet === 4) {
        currentMessages = [...fourthMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "${chestAttempts} intentos. Necesitas ayuda"`;
      } else if (currentMessageSet === 5) {
        currentMessages = [...fifthMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "${chestAttempts} intentos. Esto es patol√≥gico"`;
      } else if (currentMessageSet === 6) {
        currentMessages = [...sixthMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "${chestAttempts} intentos. Adi√≥s"`;
      } else if (currentMessageSet === 7) {
        currentMessages = [...seventhMessages];
        currentMessages[currentMessages.length - 1] = `* Marcus: "${chestAttempts} intentos en el vac√≠o"`;
      } else if (currentMessageSet === 8 || currentMessageSet === 9) {
        currentMessages = [...eighthMessages];
      } else if (currentMessageSet === 10) {
        currentMessages = [...tenthMessages];
      } else if (currentMessageSet === 11) {
        currentMessages = [...eleventhMessages];
      } else if (currentMessageSet === 12) {
        currentMessages = [...twelfthMessages];
      } else if (currentMessageSet === 13) {
        currentMessages = [...thirteenthMessages];
      } else if (currentMessageSet === 14) {
        currentMessages = [...fourteenthMessages];
      } else if (currentMessageSet === 15) {
        currentMessages = [...fifteenthMessages];
      } else if (currentMessageSet === 16) {
        currentMessages = [...sixteenthMessages];
      } else if (currentMessageSet === 17) {
        currentMessages = getSeventeenthMessages(currentMessageSet);
      } else if (currentMessageSet === 18) {
        currentMessages = getEighteenthMessages(currentMessageSet);
      } else if (currentMessageSet === 19) {
        currentMessages = getNineteenthMessages(currentMessageSet);
      } else if (currentMessageSet === 20) {
        currentMessages = getTwentiethMessages(currentMessageSet);
      } else if (currentMessageSet === 21) {
        currentMessages = getTwentyFirstMessages(currentMessageSet);
      } else if (currentMessageSet === 22) {
        currentMessages = getTwentySecondMessages(currentMessageSet);
      } else if (currentMessageSet === 23) {
        currentMessages = getTwentyThirdMessages(currentMessageSet);
      } else if (currentMessageSet === 24) {
        currentMessages = getTwentyFourthMessages(currentMessageSet);
      } else if (currentMessageSet === 25) {
        currentMessages = getTwentyFifthMessages(currentMessageSet);
      } else if (currentMessageSet === 26) {
        currentMessages = getTwentySixthMessages(currentMessageSet);
      } else if (currentMessageSet === 27) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 28) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 29) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 30) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 31) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 32) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 33) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 34) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 35) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 36) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 37) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 38) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 39) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 40) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 41) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 42) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet === 43) {
        currentMessages = getRandomMessages(currentMessageSet);
      } else if (currentMessageSet >= 44) {
        currentMessages = getRandomMessages(currentMessageSet);
      }
      
      textbox.style.display = 'block';
      
      typeMessage(currentMessages[messageIndex], content);
      
      // Check if we need to ask for user name
      const needsUserName = currentMessageSet >= 44 && !localStorage.getItem('userName') && 
                           currentMessages.some(msg => msg.includes('escribe tu nombre'));
      
      if (needsUserName) {
        // Create input field for name
        const nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.placeholder = 'Escribe tu nombre aqu√≠...';
        nameInput.style.cssText = 'width: 100%; padding: 10px; margin-top: 10px; background: #333; color: #fff; border: 1px solid #fff; font-family: "Courier New", monospace;';
        
        nameInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            const name = nameInput.value.trim();
            if (name.length < 2) {
              nameInput.style.borderColor = '#ff0000';
              nameInput.placeholder = 'M√≠nimo 2 caracteres...';
              return;
            }
            if (name.length > 20) {
              nameInput.style.borderColor = '#ff0000';
              nameInput.placeholder = 'M√°ximo 20 caracteres...';
              return;
            }
            if (!/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë0-9\s]+$/.test(name)) {
              nameInput.style.borderColor = '#ff0000';
              nameInput.placeholder = 'Solo letras y n√∫meros...';
              return;
            }
            localStorage.setItem('userName', name);
            textbox.style.display = 'none';
            messageIndex = 0;
            setTimeout(() => showTextbox(), 100);
          }
        });
        
        content.appendChild(nameInput);
        nameInput.focus();
      } else {
        function handleTextboxInteraction() {
          if (isTyping) {
            content.textContent = currentMessages[messageIndex];
            isTyping = false;
            document.getElementById('continue-arrow').style.display = 'block';
          } else {
            messageIndex++;
            if (messageIndex < currentMessages.length) {
              typeMessage(currentMessages[messageIndex], content);
            } else {
              textbox.style.display = 'none';
              document.getElementById('continue-arrow').style.display = 'none';
              messageIndex = 0;
              currentMessageSet++;
              localStorage.setItem('currentMessageSet', currentMessageSet.toString());
            }
          }
        }
        
        textbox.onclick = handleTextboxInteraction;
        textbox.ontouchstart = (e) => {
          e.preventDefault();
          handleTextboxInteraction();
        };
        
        document.addEventListener('keydown', (e) => {
          if (textbox.style.display === 'block' && e.key === 'Enter') {
            handleTextboxInteraction();
          }
        });
      }
    }
    

  </script>
</body>
</html>